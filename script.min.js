!function(){"use strict";var e=document.querySelector(".hero-reveal");if(e){function O(){e.classList.add("hero-ready")}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",O):requestAnimationFrame(O)}var t=document.querySelectorAll(".reveal");if(t.length&&"IntersectionObserver"in window){var n=new IntersectionObserver(function(e){e.forEach(function(e){e.isIntersecting&&e.target.classList.add("reveal-in")})},{threshold:.1,rootMargin:"0px 0px -40px 0px"});t.forEach(function(e){n.observe(e)})}var a=document.getElementById("year");a&&(a.textContent=(new Date).getFullYear());var i=document.querySelector(".nav-toggle"),r=document.querySelector(".nav-links");if(i&&r){i.addEventListener("click",function(){var e="true"===i.getAttribute("aria-expanded");i.setAttribute("aria-expanded",!e),r.classList.toggle("is-open"),document.body.style.overflow=e?"":"hidden"}),r.querySelectorAll("a").forEach(function(e){e.addEventListener("click",function(){i.setAttribute("aria-expanded","false"),r.classList.remove("is-open"),document.body.style.overflow=""})});var o=document.querySelector(".nav-close");o&&o.addEventListener("click",function(){i.setAttribute("aria-expanded","false"),r.classList.remove("is-open"),document.body.style.overflow=""})}var s=document.getElementById("about"),c=document.querySelector(".bio-content");if(s&&c){var d=!0,l=!1;new IntersectionObserver(function(e){e.forEach(function(e){var t=e.isIntersecting;if(d)return d=!1,l=t,void(t&&c.classList.add("in-view"));t&&!l&&c.classList.add("in-view"),l=t})},{threshold:.05,rootMargin:"0px 0px 0px 0px",root:null}).observe(s)}var u=document.querySelectorAll(".bio-filter-btn"),m=document.querySelectorAll(".bio-view");u.forEach(function(e){e.addEventListener("click",function(){var t=e.getAttribute("data-bio-view");t&&(u.forEach(function(e){var n=e.getAttribute("data-bio-view")===t;e.classList.toggle("is-active",n),e.setAttribute("aria-pressed",n?"true":"false")}),m.forEach(function(e){e.getAttribute("data-view")===t?e.removeAttribute("hidden"):e.setAttribute("hidden","")}))})});var v=document.querySelectorAll("section[id]"),f=document.querySelectorAll(".nav-links a[href^='#']");function g(){var e=window.scrollY||window.pageYOffset,t=document.querySelector(".site-header")?.offsetHeight||80;v.forEach(function(n){var a=n.getAttribute("id"),i=n.offsetTop-t,r=n.offsetHeight;e>=i&&e<i+r&&f.forEach(function(e){e.getAttribute("href")==="#"+a?e.setAttribute("aria-current","page"):e.removeAttribute("aria-current")})})}v.length&&f.length&&(window.addEventListener("scroll",g,{passive:!0}),g());var y=document.getElementById("open-contact-modal"),b=document.getElementById("contact-modal"),h=document.getElementById("contact-modal-backdrop"),A=document.getElementById("close-contact-modal");y&&y.addEventListener("click",function(e){e.preventDefault(),b&&(b.classList.add("is-open"),b.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden"),w&&w.setAttribute("hidden","")});var p=document.getElementById("contact-modal-form"),L=b?b.querySelector(".contact-modal-box"):null,E=document.getElementById("contact-modal-success"),w=document.getElementById("contact-modal-submit-error");function S(){(function(){if(!p)return!1;var e=(p.querySelector("#contact-modal-name")||{}).value||"",t=(p.querySelector("#contact-modal-email")||{}).value||"",n=(p.querySelector("#contact-modal-message")||{}).value||"";return""!==e.trim()||""!==t.trim()||""!==n.trim()})()&&!confirm("You have unsaved changes. Close anyway?")||(b&&(b.classList.remove("is-open"),b.setAttribute("aria-hidden","true"),document.body.style.overflow=""),L&&L.classList.remove("is-sent"),E&&E.setAttribute("hidden",""),w&&w.setAttribute("hidden",""),p&&p.classList.remove("is-sending"))}A&&A.addEventListener("click",S),h&&h.addEventListener("click",S),document.addEventListener("keydown",function(e){"Escape"===e.key&&b&&b.classList.contains("is-open")&&S()});var q=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*\.[a-zA-Z]{2,}$/,x=["mailinator.com","guerrillamail.com","10minutemail.com","temp-mail.org","throwaway.email","fakeinbox.com","trashmail.com","yopmail.com","mailnesia.com","tempmail.com","getnada.com","sharklasers.com","guerrillamail.info","maildrop.cc","tempail.com"];if(p&&L&&E){p.addEventListener("keydown",function(e){"Enter"===e.key&&"TEXTAREA"!==e.target.tagName&&(e.preventDefault(),p.requestSubmit())}),p.addEventListener("submit",function(e){e.preventDefault();var t=e.target;w&&w.setAttribute("hidden",""),function(e){var t=e.querySelector("#contact-modal-email"),n=e.querySelector("#contact-modal-email-error");t&&(t.classList.remove("is-invalid"),t.setAttribute("aria-invalid","false")),n&&(n.textContent="")}(t);var n,a,i,r=t.querySelector("#contact-modal-email"),o=t.querySelector("#contact-modal-email-error"),s=function(e){var t=(e||"").trim().toLowerCase();if(!t)return{valid:!1,message:"Email is required."};if(!q.test(t))return{valid:!1,message:"Please enter a valid email address."};var n=t.split("@")[1]||"";return-1!==x.indexOf(n)?{valid:!1,message:"Please use a permanent email address (disposable emails are not accepted)."}:{valid:!0}}(r?r.value:"");if(s.valid||(a=o,i=s,(n=r)&&a&&(n.classList.add("is-invalid"),n.setAttribute("aria-invalid","true"),a.textContent=i.message)),s.valid){var c=t.getAttribute("action");if(!c||-1!==c.indexOf("YOUR_FORM_ID"))return t.classList.add("is-sending"),void setTimeout(function(){t.classList.remove("is-sending"),L.classList.add("is-sent"),E.removeAttribute("hidden"),setTimeout(function(){S(),L.classList.remove("is-sent"),E.setAttribute("hidden",""),t.reset()},2200)},1200);t.classList.add("is-sending");var d=new FormData(t);fetch(c,{method:"POST",body:d,headers:{Accept:"application/json"}}).then(function(e){if(!e.ok)throw new Error("Submit failed");L.classList.add("is-sent"),E.removeAttribute("hidden"),t.reset(),setTimeout(function(){S(),L.classList.remove("is-sent"),E.setAttribute("hidden","")},2200)}).catch(function(){t.classList.remove("is-sending"),w&&w.removeAttribute("hidden")}).finally(function(){t.classList.remove("is-sending")})}});var k=p.querySelector("#contact-modal-email");k&&k.addEventListener("input",function(){this.classList.remove("is-invalid"),this.setAttribute("aria-invalid","false");var e=p.querySelector("#contact-modal-email-error");e&&(e.textContent="")});var I=p.querySelector("#contact-modal-message"),B=document.getElementById("contact-modal-char-count");if(I&&B){function z(){B.textContent=(I.value||"").length}I.addEventListener("input",z),I.addEventListener("change",z),z()}}}();