!function(){"use strict";var e=document.getElementById("year");e&&(e.textContent=(new Date).getFullYear());var t=document.querySelector(".nav-toggle"),i=document.querySelector(".nav-links");if(t&&i){t.addEventListener("click",function(){var e="true"===t.getAttribute("aria-expanded");t.setAttribute("aria-expanded",!e),i.classList.toggle("is-open"),document.body.style.overflow=e?"":"hidden"}),i.querySelectorAll("a").forEach(function(e){e.addEventListener("click",function(){t.setAttribute("aria-expanded","false"),i.classList.remove("is-open"),document.body.style.overflow=""})});var a=document.querySelector(".nav-close");a&&a.addEventListener("click",function(){t.setAttribute("aria-expanded","false"),i.classList.remove("is-open"),document.body.style.overflow=""})}var n=document.getElementById("about"),r=document.querySelector(".bio-content");if(n&&r){var o=!0,s=!1;new IntersectionObserver(function(e){e.forEach(function(e){var t=e.isIntersecting;if(o)return o=!1,s=t,void(t&&r.classList.add("in-view"));t&&!s&&r.classList.add("in-view"),s=t})},{threshold:.05,rootMargin:"0px 0px 0px 0px",root:null}).observe(n)}var c=document.querySelectorAll(".bio-filter-btn"),d=document.querySelectorAll(".bio-view");c.forEach(function(e){e.addEventListener("click",function(){var t=e.getAttribute("data-bio-view");t&&(c.forEach(function(e){var i=e.getAttribute("data-bio-view")===t;e.classList.toggle("is-active",i),e.setAttribute("aria-pressed",i?"true":"false")}),d.forEach(function(e){e.getAttribute("data-view")===t?e.removeAttribute("hidden"):e.setAttribute("hidden","")}))})});var l=document.querySelectorAll("section[id]"),u=document.querySelectorAll(".nav-links a[href^='#']");function m(){var e=window.scrollY||window.pageYOffset,t=document.querySelector(".site-header")?.offsetHeight||80;l.forEach(function(i){var a=i.getAttribute("id"),n=i.offsetTop-t,r=i.offsetHeight;e>=n&&e<n+r&&u.forEach(function(e){e.getAttribute("href")==="#"+a?e.setAttribute("aria-current","page"):e.removeAttribute("aria-current")})})}l.length&&u.length&&(window.addEventListener("scroll",m,{passive:!0}),m());var v=document.getElementById("open-contact-modal"),f=document.getElementById("contact-modal"),g=document.getElementById("contact-modal-backdrop"),b=document.getElementById("close-contact-modal");v&&v.addEventListener("click",function(e){e.preventDefault(),f&&(f.classList.add("is-open"),f.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden"),p&&p.setAttribute("hidden","")});var y=document.getElementById("contact-modal-form"),h=f?f.querySelector(".contact-modal-box"):null,A=document.getElementById("contact-modal-success"),p=document.getElementById("contact-modal-submit-error");function L(){(function(){if(!y)return!1;var e=(y.querySelector("#contact-modal-name")||{}).value||"",t=(y.querySelector("#contact-modal-email")||{}).value||"",i=(y.querySelector("#contact-modal-message")||{}).value||"";return""!==e.trim()||""!==t.trim()||""!==i.trim()})()&&!confirm("You have unsaved changes. Close anyway?")||(f&&(f.classList.remove("is-open"),f.setAttribute("aria-hidden","true"),document.body.style.overflow=""),h&&h.classList.remove("is-sent"),A&&A.setAttribute("hidden",""),p&&p.setAttribute("hidden",""),y&&y.classList.remove("is-sending"))}b&&b.addEventListener("click",L),g&&g.addEventListener("click",L),document.addEventListener("keydown",function(e){"Escape"===e.key&&f&&f.classList.contains("is-open")&&L()});var E=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*\.[a-zA-Z]{2,}$/,w=["mailinator.com","guerrillamail.com","10minutemail.com","temp-mail.org","throwaway.email","fakeinbox.com","trashmail.com","yopmail.com","mailnesia.com","tempmail.com","getnada.com","sharklasers.com","guerrillamail.info","maildrop.cc","tempail.com"];if(y&&h&&A){y.addEventListener("keydown",function(e){"Enter"===e.key&&"TEXTAREA"!==e.target.tagName&&(e.preventDefault(),y.requestSubmit())}),y.addEventListener("submit",function(e){e.preventDefault();var t=e.target;p&&p.setAttribute("hidden",""),function(e){var t=e.querySelector("#contact-modal-email"),i=e.querySelector("#contact-modal-email-error");t&&(t.classList.remove("is-invalid"),t.setAttribute("aria-invalid","false")),i&&(i.textContent="")}(t);var i,a,n,r=t.querySelector("#contact-modal-email"),o=t.querySelector("#contact-modal-email-error"),s=function(e){var t=(e||"").trim().toLowerCase();if(!t)return{valid:!1,message:"Email is required."};if(!E.test(t))return{valid:!1,message:"Please enter a valid email address."};var i=t.split("@")[1]||"";return-1!==w.indexOf(i)?{valid:!1,message:"Please use a permanent email address (disposable emails are not accepted)."}:{valid:!0}}(r?r.value:"");if(s.valid||(a=o,n=s,(i=r)&&a&&(i.classList.add("is-invalid"),i.setAttribute("aria-invalid","true"),a.textContent=n.message)),s.valid){var c=t.getAttribute("action");if(!c||-1!==c.indexOf("YOUR_FORM_ID"))return t.classList.add("is-sending"),void setTimeout(function(){t.classList.remove("is-sending"),h.classList.add("is-sent"),A.removeAttribute("hidden"),setTimeout(function(){L(),h.classList.remove("is-sent"),A.setAttribute("hidden",""),t.reset()},2200)},1200);t.classList.add("is-sending");var d=new FormData(t);fetch(c,{method:"POST",body:d,headers:{Accept:"application/json"}}).then(function(e){if(!e.ok)throw new Error("Submit failed");h.classList.add("is-sent"),A.removeAttribute("hidden"),t.reset(),setTimeout(function(){L(),h.classList.remove("is-sent"),A.setAttribute("hidden","")},2200)}).catch(function(){t.classList.remove("is-sending"),p&&p.removeAttribute("hidden")}).finally(function(){t.classList.remove("is-sending")})}});var S=y.querySelector("#contact-modal-email");S&&S.addEventListener("input",function(){this.classList.remove("is-invalid"),this.setAttribute("aria-invalid","false");var e=y.querySelector("#contact-modal-email-error");e&&(e.textContent="")});var q=y.querySelector("#contact-modal-message"),k=document.getElementById("contact-modal-char-count");if(q&&k){function x(){k.textContent=(q.value||"").length}q.addEventListener("input",x),q.addEventListener("change",x),x()}}}();